<!doctype html><html lang=en><head><title>Tracking down where disk space has gone on Linux · To be the Light</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Lemuel Wint"><meta name=description content="As a Linux administrator, I recently encountered a situation where one of my
servers was displaying low disk utilization. To rectify the issue, I decided to
employ a strategy of decluttering by removing any redundant files, including
expired logs.
In order to accomplish this task, I first established a secure remote connection
to the server using ssh. Then, I embarked on the following series of steps to
reclaim the precious disk space and restore optimal performance to my Linux
system."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tracking down where disk space has gone on Linux"><meta name=twitter:description content="As a Linux administrator, I recently encountered a situation where one of my servers was displaying low disk utilization. To rectify the issue, I decided to employ a strategy of decluttering by removing any redundant files, including expired logs.
In order to accomplish this task, I first established a secure remote connection to the server using ssh. Then, I embarked on the following series of steps to reclaim the precious disk space and restore optimal performance to my Linux system."><meta property="og:url" content="https://wlemuel.github.io/2020/09/15/tracking-down-where-disk-space-has-gone-on-linux/"><meta property="og:site_name" content="To be the Light"><meta property="og:title" content="Tracking down where disk space has gone on Linux"><meta property="og:description" content="As a Linux administrator, I recently encountered a situation where one of my servers was displaying low disk utilization. To rectify the issue, I decided to employ a strategy of decluttering by removing any redundant files, including expired logs.
In order to accomplish this task, I first established a secure remote connection to the server using ssh. Then, I embarked on the following series of steps to reclaim the precious disk space and restore optimal performance to my Linux system."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-09-15T18:42:33+08:00"><meta property="article:modified_time" content="2020-09-15T18:42:33+08:00"><meta property="og:see_also" content="https://wlemuel.github.io/2023/03/16/bsd-roots-of-linux-command-line-tools-parameters-without-syntax/"><meta property="og:see_also" content="https://wlemuel.github.io/2020/03/09/make-teamviewer-work-on-arch-linux/"><link rel=canonical href=https://wlemuel.github.io/2020/09/15/tracking-down-where-disk-space-has-gone-on-linux/><link rel=preload href=https://wlemuel.github.io/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://wlemuel.github.io/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://wlemuel.github.io/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=https://wlemuel.github.io/css/coder.min.6445a802b9389c9660e1b07b724dcf5718b1065ed2d71b4eeaf981cc7cc5fc46.css integrity="sha256-ZEWoArk4nJZg4bB7ck3PVxixBl7S1xtO6vmBzHzF/EY=" crossorigin=anonymous media=screen><link rel=stylesheet href=https://wlemuel.github.io/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=https://wlemuel.github.io/images/favicon.svg sizes=any><link rel=icon type=image/png href=https://wlemuel.github.io/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://wlemuel.github.io/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=https://wlemuel.github.io/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=https://wlemuel.github.io/images/apple-touch-icon.png><link rel=manifest href=https://wlemuel.github.io/site.webmanifest><link rel=mask-icon href=https://wlemuel.github.io/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://wlemuel.github.io/>To be the Light
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=https://wlemuel.github.io/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=https://wlemuel.github.io/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://wlemuel.github.io/2020/09/15/tracking-down-where-disk-space-has-gone-on-linux/>Tracking down where disk space has gone on Linux</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=2020-09-15T18:42:33+08:00>September 15, 2020
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
3-minute read</span></div><div class=categories><i class="fa-solid fa-folder" aria-hidden=true></i>
<a href=https://wlemuel.github.io/categories/linux/>Linux</a></div></div></header><div class=post-content><img src=https://wlemuel.github.io/images/posts/track-down-free-disk-space.png alt="Featured image"><p>As a Linux administrator, I recently encountered a situation where one of my
servers was displaying low disk utilization. To rectify the issue, I decided to
employ a strategy of decluttering by removing any redundant files, including
expired logs.</p><p>In order to accomplish this task, I first established a secure remote connection
to the server using ssh. Then, I embarked on the following series of steps to
reclaim the precious disk space and restore optimal performance to my Linux
system.</p><h2 id=1-dot-show-the-disk-space-information-dot>1. Show the disk space information.
<a class=heading-link href=#1-dot-show-the-disk-space-information-dot><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>df -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filesystem      Size  Used Avail Use% Mounted on</span>
</span></span><span style=display:flex><span><span style=color:#75715e># /dev/vda1        40G   33G  4.5G  89% /</span>
</span></span><span style=display:flex><span><span style=color:#75715e># devtmpfs        1.9G     0  1.9G   0% /dev</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G     0  1.9G   0% /dev/shm</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G  484K  1.9G   1% /run</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           380M     0  380M   0% /run/user/1005</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           380M     0  380M   0% /run/user/0</span>
</span></span></code></pre></div><p>I discovered that the server had only 4.5GB of disk space remaining. This
prompted me to take immediate action and commence the process of freeing up disk
space by eliminating unnecessary files.</p><h2 id=2-dot-find-out-the-biggest-files-and-directories-dot>2. Find out the biggest files and directories.
<a class=heading-link href=#2-dot-find-out-the-biggest-files-and-directories-dot><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>du -Sh / | sort -rh | head -n <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># du: cannot access ‘/proc/13476/task/13476/fd/4’: No such file or directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># du: cannot access ‘/proc/13476/task/13476/fdinfo/4’: No such file or directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># du: cannot access ‘/proc/13476/fd/4’: No such file or directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># du: cannot access ‘/proc/13476/fdinfo/4’: No such file or directory</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1.3G    /usr/local/mysql/bin</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1008M   /usr/local/mysql/lib</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 622M    /root/oneinstack/src</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 497M    /var/log/journal/a9fe31fd96c841a5a16f9c54110b66cc</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 174M    /boot</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 121M    /data/mysql</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 114M    /usr/lib64</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 114M    /usr/bin</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 102M    /usr/lib/locale</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 86M     /usr/java/jdk1.7.0_80/jre/lib</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 76M     /usr/local/cloudmonitor/jre/lib/i386</span>
</span></span></code></pre></div><p>What&rsquo;s wrong ????</p><p>There seems no big files or directories. (It&rsquo;s impossible according to my experience!!!)</p><h2 id=3-dot-find-out-the-data-that-was-deleted-but-not-released-by-filesystem-dot>3. Find out the data that was deleted but not released by FileSystem.
<a class=heading-link href=#3-dot-find-out-the-data-that-was-deleted-but-not-released-by-filesystem-dot><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lsof | grep <span style=color:#e6db74>&#39;(deleted)&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  21228            root    7u      REG              253,1           0     665601 /tmp/wgunicorn-AcuOTP (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  21230            root    7u      REG              253,1           0     665590 /tmp/wgunicorn-ddaaqtnp (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  21230            root    8u      REG              253,1           0     665593 /tmp/wgunicorn-lpv_r06g (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  21230            root    9u      REG              253,1           0     665596 /tmp/wgunicorn-kqmta562 (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  21230            root   10u      REG              253,1           0     665603 /tmp/wgunicorn-fnusav1e (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx     21495            root    5w      REG              253,1 26287067976    1709016 /var/log/nginx/access.log (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx     21496            root    5w      REG              253,1 26287067976    1709016 /var/log/nginx/access.log (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># nginx     21497            root    5w      REG              253,1 26287067976    1709016 /var/log/nginx/access.log (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  27996            root    6u      REG              253,1           0     665594 /tmp/wgunicorn-7CgVKM (deleted)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># gunicorn  27996            root    7u      REG              253,1           0     665601 /tmp/wgunicorn-AcuOTP (deleted)</span>
</span></span></code></pre></div><p>It shows that the issue was caused by a failure to properly purge nginx logs from the system.</p><h2 id=4-dot-restart-nginx-process-to-release-the-logs-dot>4. Restart nginx process to release the logs.
<a class=heading-link href=#4-dot-restart-nginx-process-to-release-the-logs-dot><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>systemctl restart nginx
</span></span></code></pre></div><h2 id=5-dot-confirm-the-storage-is-released-dot>5. Confirm the storage is released.
<a class=heading-link href=#5-dot-confirm-the-storage-is-released-dot><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>df -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Filesystem      Size  Used Avail Use% Mounted on</span>
</span></span><span style=display:flex><span><span style=color:#75715e># /dev/vda1        40G  8.4G   29G  23% /</span>
</span></span><span style=display:flex><span><span style=color:#75715e># devtmpfs        1.9G     0  1.9G   0% /dev</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G     0  1.9G   0% /dev/shm</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G  484K  1.9G   1% /run</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           1.9G     0  1.9G   0% /sys/fs/cgroup</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           380M     0  380M   0% /run/user/1005</span>
</span></span><span style=display:flex><span><span style=color:#75715e># tmpfs           380M     0  380M   0% /run/user/0</span>
</span></span></code></pre></div></div><footer><section class=see-also><h3 id=see-also-in-linux>See also in Linux
<a class=heading-link href=#see-also-in-linux><i class="fa-solid fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><nav><ul><li><a href=https://wlemuel.github.io/2023/03/16/bsd-roots-of-linux-command-line-tools-parameters-without-syntax/>BSD Roots of Linux Command Line Tools: Parameters without "–" Syntax</a></li><li><a href=https://wlemuel.github.io/2020/03/09/make-teamviewer-work-on-arch-linux/>Make TeamViewer Work on Arch Linux</a></li></ul></nav></section><div class=comments><script>let getTheme=window.localStorage&&window.localStorage.getItem("colorscheme"),themeInParams="preferred-color-scheme";getTheme==null&&(themeInParams!==""&&themeInParams!=="auto"?getTheme=themeInParams:getTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let theme=getTheme==="dark"?"github-dark":"github-light",s=document.createElement("script");s.src="https://utteranc.es/client.js",s.setAttribute("repo","wlemuel/wlemuel.github.io"),s.setAttribute("issue-term","title"),s.setAttribute("theme",theme),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div></footer></article><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css integrity=sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0 crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js integrity=sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script></section></div><footer class=footer><section class=container>©
2020 -
2025
Lemuel Wint
·
Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=https://wlemuel.github.io/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>